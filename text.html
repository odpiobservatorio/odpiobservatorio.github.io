<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <!-- Boostrap 5 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"></script>
    <script src="assets/js/counter-animation.js" defer></script>

    <!-- Cargar scripts -->
    <link rel="stylesheet" href="../style.css">
</head>

<body>
    <div class="ms-2">
        <ul class="list-group">
            <li class="list-group-item">
                <p class="fw-medium">Etiqueta tipo pol√≠gono</p>
                <div class="row justify-content-start">
                    <div class="col m-1">
                        <div class="dropdown">
                            <button id="bTypePolygon" style="background-color:white;" class="btn dropdown-toggle"
                                type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                Tipo
                            </button>
                            <ul id="" class="dropdown-menu">
                                <li>
                                    <a class="dropdown-item mb-1" href="#" onclick="SeltipoMarca('0')">
                                        <svg width="40" height="20" style="background-color:orange;"></svg>
                                        Cuadro
                                    </a>
                                </li>
                                <li>
                                    <a class="dropdown-item" href="#" onclick="SeltipoMarca('1')">
                                        <svg width="25" height="25" style="background-color:crimson;"
                                            class="rounded-circle ms-2 me-2"></svg>
                                        Punto
                                    </a>
                                </li>
                                <li>
                                    <a class="dropdown-item" href="#" onclick="SeltipoMarca('2')">
                                        <svg width="40" height="5" style="background-color:darkcyan;"></svg>
                                        Linea
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="col m-1">
                        <div class="dropdown">
                            <button id="bColorPolygon" style="background-color:lightgray;" class="btn dropdown-toggle"
                                type="button" data-bs-toggle="dropdown" aria-expanded="false"
                                onclick="ListColors(this)">
                                COLOR
                            </button>
                            <ul id="" class="dropdown-menu">
                                <div id="ulColorList" class="container-fluid"></div>
                            </ul>
                        </div>
                    </div>
                    <div class="col ms-3 m-1">
                        <div class="dropdown">
                            <button id="bOpacityPolygon" class="btn  dropdown-toggle" type="button"
                                data-bs-toggle="dropdown" aria-expanded="false" onclick="">
                                100%
                            </button>
                            <ul id="" class="dropdown-menu" style="width: 50px;">
                                <li><a class="dropdown-item" href="#" onclick="fillOpacity(1)">100%</a></li>
                                <li><a class="dropdown-item" href="#" onclick="fillOpacity(0.9)">90%</a></li>
                                <li><a class="dropdown-item" href="#" onclick="fillOpacity(0.8)">80%</a></li>
                                <li><a class="dropdown-item" href="#" onclick="fillOpacity(0.7)">70%</a></li>
                                <li><a class="dropdown-item" href="#" onclick="fillOpacity(0.6)">60%</a></li>
                                <li><a class="dropdown-item" href="#" onclick="fillOpacity(0.5)">50%</a></li>
                                <li><a class="dropdown-item" href="#" onclick="fillOpacity(0.4)">40%</a></li>
                                <li><a class="dropdown-item" href="#" onclick="fillOpacity(0.3)">30%</a></li>
                                <li><a class="dropdown-item" href="#" onclick="fillOpacity(0.2)">20%</a></li>
                                <li><a class="dropdown-item" href="#" onclick="fillOpacity(0.1)">10%</a></li>
                            </ul>
                        </div>
                    </div>

                    <div class="col m-1">
                        <input id="textPolygon" type="text" class="form-control" placeholder="Leyenda" value="Leyenda">
                    </div>
                    <div class="col">
                        <button type="button" class="btn btn-info mt-1" onclick="addEtiquetaPolygon()">
                            <i class="bi bi-file-plus-fill text-white"></i>
                        </button>
                    </div>

                </div>
            </li>
        </ul>
    </div>
    <div id="divLeyendas" style="width: 300px;">

    </div>
</body>
<script>
    let fillPercent;
    let TipoMarcador;
    const ColorList = [
        //rojos
        "#C0392B", "#E74C3C",
        //Violetas
        "#9B59B6", "#AF7AC5",
        //Azules
        "#2980B9", "#3498DB",
        //Asure
        "#48C9B0", "#45B39D",
        //Verdes
        "#52BE80 ", "#2ECC71", "#145A32",
        //Naranjas
        "#F1C40F","#F39C12","#E67E22","#D35400",

        "#ECF0F1", 
        "#BDC3C7", "#95A5A6", "#7F8C8D", "#34495E",
        "#2C3E50","#17202A"
    ]

    let cListColor = "";
    let cUl = document.getElementById("ulColorList")
    cUl.innerHTML = ""

    function ListColors(control) {

        cUl.innerHTML = ""
        ColorList.forEach(color => {
            let liC = document.createElement("svg")

            liC.innerHTML = `
                        <svg width="40" height="20" 
                        style="background-color:${color};
                        opacity: 1"
                        onClick="cambiarColorB('${color}', '${control.id}')"></svg>
                `
            cUl.appendChild(liC)

        })
    }

    function cambiarColorB(color, control) {
        document.getElementById(control).style.background = color
        document.getElementById("bColorPolygon").style.opacity = 1
        fillPercent = 1
    }

    function addEtiquetaPolygon() {





        let DivLeyendasTest = document.getElementById("divLeyendas")
        let colorP = document.getElementById("bColorPolygon").style.background
        let textP = document.getElementById("textPolygon").value

        const LabelType = [
            `<svg width="20" height="15" 
                style="background-color:${colorP};opacity:${fillPercent}"></svg>`,

            `<div class="rounded-circle text-white text-center pDot fw-medium mt-2"
                style="background-color:${colorP};opacity:${fillPercent};
                width: 20px; height: 20px;">V</div>`,

            `<svg width="20" height="4" style="background-color:${colorP};opacity:${fillPercent}"></svg>`

        ]

        let NewLabel = document.createElement("div")



        NewLabel.innerHTML = `
        <div class="row align-bottom">
            <div class="col-auto me-auto ms-3">
                ${LabelType[TipoMarcador]}
            </div>
            <div class="col">
            <tLeyenda>${textP}</tLeyenda>
            </div>
        </div>
`
        DivLeyendasTest.appendChild(NewLabel)

    }
    function fillOpacity(value) {
        document.getElementById("bColorPolygon").style.opacity = value
        fillPercent = value
    }

    function SeltipoMarca(valor) {
        TipoMarcador = valor;


        let cTipoP = document.getElementById("bTypePolygon")


        if (valor == '0') {
            cTipoP.textContent = "Cuadro"
        } else if (valor == '1') {
            cTipoP.textContent = "Punto"
        } else if (valor == '2') {
            cTipoP.textContent = "Linea"
        }
    }
</script>

</html>